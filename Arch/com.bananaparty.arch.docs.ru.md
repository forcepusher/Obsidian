# Архитектура "Спидран по контракту"
Поехали.
## Оглавление
Материал будет состоять из практических и философских частей.
- На философской части мы стабилизируем понимание слова "объект" и всего, что с ним связано, чтобы понять принятые решения и совершать меньше детских ошибок.
- На практике мы нырнём сразу в дело и сделаем с помощью пары скриптов то, ради чего нормисы обычно несут в Unity проект несколько фреймворков с граблями, на которые уже не смешно наступать в 20-й раз.
- Так же будет блок по авто тестированию проектов. Никто вам не выделит целый отдел тестировщиков. Не у всех есть бюджет, чтоб закидать проблему деньгами.
## TL;DR выжимки
Хороший код человек пишет в первые 1-2 года своей карьеры. Затем только через 10-15 лет. Чем быстрей вы выйдите из середины, тем проще будет жить вам и всем окружающим, поэтому я постараюсь ускорить процесс трансформации.
![[linesperhourprogrammer.png]]
Пункты будут доработаны из TL;DR версии в полный трактат по запросу "пояснить за базар".
#### TL;DR: Спидран по философии объекта
- Представьте, что объект это самостоятельная консольная программа. Из неё нельзя просто так достать чё хочешь и вертеть как хочешь, у неё есть свой интерфейс командной строки (CLI) для общения с программой (например как у Git в терминале). В нашем случае интерфейсом являются публичные методы класса, либо явно заданный интерфейс.
  (Источник: [мой старый пост](https://forcepusher.tumblr.com/post/646953788143484928/my-take-on-explaining-oop-to-traditional))
- Объекты должны имплементировать одну фичу, S это не просто так первая буква в SOLID. Ещё объекты должны быть самодостаточными. По завершению исполнения конструктора, у объекта должны быть все необходимые данные и ссылки для исполнения своей задачи. В случае с Unity, конструктор это референсы/поля инспектора и Awake.
  (Источник: Robert Martin, Егор Бугаенко, и я со своим Unity)
- Объект состоит из поведения и состояния. Поведение - главный признак объекта, не бывает поведения в вакууме. Объектов без поведения тоже не бывает, это структура. Поэтому деление на Model, View и Controller (либо другой MV*) это ошибка дизайна.
  (Источники: [David West (Object Thinking)]([(1) Interview with David West (part 1) - YouTube](https://www.youtube.com/watch?v=s-hdZZzMCac)) и Егор Бугаенко)
- В правильном наименовании класса содержится 90% решения проблемы, это источник правильного мышления. Имя не должно быть излишне абстрактным - наоборот, ненадо бояться конкретики. И не пытайтесь набить цену классу, продавая его умным названием. Если назвать дом хендлером жителей, то и делать будешь хендлер жителей, а не дом.
  (Источник: тоже я)
- Избегать названия объектов, образованных от глагола (Manager, Controller, Presenter, Handler), оно должно оканчиваться существительным. Основной детектор ошибки это окончания -er. Да, бывают существительные как Character, Computer, но идею вы поняли.
  Объекты надо называть исходя из того что они содержат или чем по сути являются.
  (Источники: Егор Бугаенко, [Peter Coad]([Peter Coad - Wikipedia](https://en.wikipedia.org/wiki/Peter_Coad)), [Carlo Pescio]([Carlo Pescio: Your coding conventions are hurting you](https://www.carlopescio.com/2011/04/your-coding-conventions-are-hurting-you.html)), [Travis Griggs]([Objology: One of the Best Bits of Programming Advice I ever Got](https://objology.blogspot.com/2011/09/one-of-best-bits-of-programming-advice.html)), [Ben Hall]([Naming Objects – Don’t use ER in your object names | Engineering Rants and Raves](https://web.archive.org/web/20130116152533/https://www.benhallbenhall.com/2013/01/naming-objects-er-object-names/)), и [Ben Dover]([Rick Astley - Never Gonna Give You Up (Official Video) (4K Remaster)](https://www.youtube.com/watch?v=dQw4w9WgXcQ)). Этот пункт больше всего поддаётся критике, но слишком много великих мыслителей включая меня заметили эту проблему, поэтому вам придётся с этим жить)
#### TL;DR: Волшебные скрипты для архитектуры в Unity
Если всё что выше непонятно - ничего страшного, у нас есть волшебные бобы.
Каждый из ~~скриптов~~ бобов решает точечну одну проблему, и доставать его из мешочка мы будем только тогда, когда проблема физически материализуется, вместо того чтоб бежать впереди паровоза и городить какую-то бесполезную херню заранее.
- Ситуация "Я хочу глобальные скрипты)))))0 а техлид говорит нельзя статику((((((((99".
#### TL;DR: Как выжить без толпы тестировщиков
